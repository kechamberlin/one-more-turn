"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var loadingPromise = null;

function loadGoogleMapsApi(props) {
  var callbackName = '___sanity_googleMapsApiCallback';
  var selectedLocale = props.locale || 'en-US';
  var apiKey = props.apiKey;

  if (window.google && window.google.maps) {
    return Promise.resolve(window.google.maps);
  }

  if (window[callbackName]) {
    return loadingPromise;
  }

  loadingPromise = new Promise((resolve, reject) => {
    window[callbackName] = () => {
      delete window[callbackName];
      resolve(window.google.maps);
    };

    var script = document.createElement('script');
    script.src = "https://maps.googleapis.com/maps/api/js?key=".concat(apiKey, "&libraries=places&callback=").concat(callbackName, "&language=").concat(selectedLocale);
    document.getElementsByTagName('head')[0].appendChild(script);
  });
  return loadingPromise;
}

var _default = loadGoogleMapsApi;
exports.default = _default;