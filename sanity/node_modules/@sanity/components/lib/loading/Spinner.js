"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _spinnerIcon = _interopRequireDefault(require("part:@sanity/base/spinner-icon"));

var _spinnerStyle = _interopRequireDefault(require("part:@sanity/components/loading/spinner-style"));

var _react = _interopRequireDefault(require("react"));

var _Portal = require("../utilities/Portal");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class Spinner extends _react.default.PureComponent {
  render() {
    var _this$props = this.props,
        inline = _this$props.inline,
        message = _this$props.message,
        fullscreen = _this$props.fullscreen,
        center = _this$props.center,
        delay = _this$props.delay,
        children = _this$props.children;
    var className = (0, _classnames.default)(inline ? _spinnerStyle.default.inline : _spinnerStyle.default.block, fullscreen && _spinnerStyle.default.fullscreen, center && _spinnerStyle.default.center);
    var rootStyle = {
      animationDelay: "".concat(delay, "ms")
    };

    var root = /*#__PURE__*/_react.default.createElement("div", {
      className: className,
      style: rootStyle
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: _spinnerStyle.default.inner
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: _spinnerStyle.default.iconContainer
    }, /*#__PURE__*/_react.default.createElement(_spinnerIcon.default, null)), children, !children && message && /*#__PURE__*/_react.default.createElement("div", {
      className: _spinnerStyle.default.message
    }, message)));

    if (fullscreen) {
      return /*#__PURE__*/_react.default.createElement(_Portal.Portal, null, root);
    }

    return root;
  }

}

exports.default = Spinner;

_defineProperty(Spinner, "propTypes", {
  center: _propTypes.default.bool,
  children: _propTypes.default.node,
  delay: _propTypes.default.number,
  // delay in ms
  fullscreen: _propTypes.default.bool,
  inline: _propTypes.default.bool,
  message: _propTypes.default.string
});

_defineProperty(Spinner, "defaultProps", {
  center: false,
  children: null,
  delay: 300,
  fullscreen: false,
  inline: false,
  message: undefined
});