"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createResizeObserver = void 0;

var _rxjs = require("rxjs");

var _operators = require("rxjs/operators");

var _resizeObserver = require("@juggle/resize-observer");

var ResizeObserver = window.ResizeObserver || _resizeObserver.ResizeObserver;

var createResizeObserver = () => {
  var entries$ = new _rxjs.Subject();
  var resizeObserver = new ResizeObserver(entries => {
    entries.forEach(entry => {
      entries$.next(entry);
    });
  });
  return {
    observe: element => {
      return new _rxjs.Observable(subscriber => {
        var subscription = entries$.pipe((0, _operators.filter)(entry => entry.target === element)).subscribe(subscriber);
        resizeObserver.observe(element);
        return () => {
          subscription.unsubscribe();
          resizeObserver.unobserve(element);
        };
      });
    }
  };
};

exports.createResizeObserver = createResizeObserver;